name: æ¸…ç†å·¥ä½œæµå†å²
on:
  schedule:
    # æ¯æœˆ1å·UTCæ—¶é—´0ç‚¹è‡ªåŠ¨æ‰§è¡Œï¼ˆåŒ—äº¬æ—¶é—´8ç‚¹ï¼‰
    - cron: '0 0 1 * *'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  cleanup:
    runs-on: ubuntu-latest
    permissions:
      actions: write  # å¿…é¡»æˆäºˆå·¥ä½œæµåˆ é™¤æƒé™
      contents: read  # åŸºç¡€ä»“åº“è¯»å–æƒé™

    steps:
    - name: åˆ é™¤å·¥ä½œæµè®°å½•
      uses: Mattraks/delete-workflow-runs@v2
      with:
        # å®‰å…¨å¢å¼ºé…ç½®ğŸ‘‡
        token: ${{ secrets.GITHUB_TOKEN }}  # ä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„token
        repository: ${{ github.repository }}
        retain_days: 0       # ä¿ç•™0å¤©å‰çš„è®°å½•ï¼ˆåˆ é™¤å…¨éƒ¨ï¼‰
        keep_minimum_runs: 0 # ä¸ä¿ç•™ä»»ä½•è®°å½•
        workflow_name: 'all' # æ˜ç¡®æŒ‡å®šæ¸…ç†èŒƒå›´
        # å¯é€‰è¿‡æ»¤å‚æ•°ğŸ‘‡
        # branch: 'main'      # åªæ¸…ç†ç‰¹å®šåˆ†æ”¯
        # actor: 'github-actions[bot]' # æŒ‰è§¦å‘è€…è¿‡æ»¤
